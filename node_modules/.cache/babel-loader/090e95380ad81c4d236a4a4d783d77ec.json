{"ast":null,"code":"var _jsxFileName = \"/Users/andrewkim/GA/mygamelist/mygamelist_frontend/src/components/Register.jsx\";\nimport React, { Component } from 'react';\nimport RegisterForm from './shared/RegisterForm';\nimport signInUser from './services/auth';\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value,\n        error: false,\n        errorMsg: \"\"\n      });\n    };\n\n    this.signUp = async credentials => {\n      console.log('this is for the signUp!!!!!!!', credentials);\n\n      try {\n        const resp = await axios.post('http://localhost:3000/users/register', credentials);\n        localStorage.setItem('token', resp.data.token);\n        return resp.data;\n      } catch (error) {\n        throw error;\n      }\n    };\n\n    this.onSignUp = event => {\n      event.preventDefault();\n      const _this$props = this.props,\n            history = _this$props.history,\n            setUser = _this$props.setUser;\n      signUp(this.state).then(() => signInUser(this.state)).then(res => setUser(res.user)).then(() => history.push(\"/\")).catch(error => {\n        console.error(error);\n        this.setState({\n          username: \"\",\n          password: \"\",\n          error: true,\n          errorMsg: \"SignUp Failed\"\n        });\n      });\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      error: false,\n      errorMsg: ''\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n    return React.createElement(RegisterForm, {\n      username: username,\n      password: password,\n      onChange: this.handleChange,\n      onSubmit: this.onSignUp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/andrewkim/GA/mygamelist/mygamelist_frontend/src/components/Register.jsx"],"names":["React","Component","RegisterForm","signInUser","Register","constructor","props","handleChange","event","setState","target","name","value","error","errorMsg","signUp","credentials","console","log","resp","axios","post","localStorage","setItem","data","token","onSignUp","preventDefault","history","setUser","state","then","res","user","push","catch","username","password","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,UAAP,MAAuB,iBAAvB;;AAQA,MAAMC,QAAN,SAAuBH,SAAvB,CAAiC;AAC7BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAanBC,YAbmB,GAaJC,KAAK,IAAI;AACpB,WAAKC,QAAL,CAAc;AACV,SAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBH,KAAK,CAACE,MAAN,CAAaE,KADxB;AAEVC,QAAAA,KAAK,EAAE,KAFG;AAGVC,QAAAA,QAAQ,EAAE;AAHA,OAAd;AAKH,KAnBkB;;AAAA,SAoBnBC,MApBmB,GAoBV,MAAMC,WAAN,IAAqB;AAC1BC,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CF,WAA7C;;AACF,UAAI;AACF,cAAMG,IAAI,GAAG,MAAMC,KAAK,CAACC,IAAN,CAAW,sCAAX,EAAmDL,WAAnD,CAAnB;AACAM,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,IAAI,CAACK,IAAL,CAAUC,KAAxC;AACA,eAAON,IAAI,CAACK,IAAZ;AACD,OAJD,CAIE,OAAOX,KAAP,EAAc;AACd,cAAMA,KAAN;AACD;AACF,KA7BkB;;AAAA,SAmCnBa,QAnCmB,GAmCRlB,KAAK,IAAI;AAChBA,MAAAA,KAAK,CAACmB,cAAN;AADgB,0BAGa,KAAKrB,KAHlB;AAAA,YAGRsB,OAHQ,eAGRA,OAHQ;AAAA,YAGCC,OAHD,eAGCA,OAHD;AAKhBd,MAAAA,MAAM,CAAC,KAAKe,KAAN,CAAN,CACGC,IADH,CACQ,MAAM5B,UAAU,CAAC,KAAK2B,KAAN,CADxB,EAEGC,IAFH,CAEQC,GAAG,IAAIH,OAAO,CAACG,GAAG,CAACC,IAAL,CAFtB,EAGGF,IAHH,CAGQ,MAAMH,OAAO,CAACM,IAAR,CAAa,GAAb,CAHd,EAIGC,KAJH,CAIStB,KAAK,IAAI;AACdI,QAAAA,OAAO,CAACJ,KAAR,CAAcA,KAAd;AACA,aAAKJ,QAAL,CAAc;AACZ2B,UAAAA,QAAQ,EAAE,EADE;AAEZC,UAAAA,QAAQ,EAAE,EAFE;AAGZxB,UAAAA,KAAK,EAAE,IAHK;AAIZC,UAAAA,QAAQ,EAAE;AAJE,SAAd;AAMD,OAZH;AAaD,KArDgB;;AAIf,SAAKgB,KAAL,GAAa;AACTM,MAAAA,QAAQ,EAAE,EADD;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTxB,MAAAA,KAAK,EAAE,KAHE;AAITC,MAAAA,QAAQ,EAAE;AAJD,KAAb;AAQH;;AAgDDwB,EAAAA,MAAM,GAAG;AAAA,wBAE0B,KAAKR,KAF/B;AAAA,UAEGM,QAFH,eAEGA,QAFH;AAAA,UAEaC,QAFb,eAEaA,QAFb;AAGL,WACI,oBAAC,YAAD;AACI,MAAA,QAAQ,EAAED,QADd;AAEI,MAAA,QAAQ,EAAEC,QAFd;AAGI,MAAA,QAAQ,EAAE,KAAK9B,YAHnB;AAII,MAAA,QAAQ,EAAE,KAAKmB,QAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAUH;;AA1E4B;;AA6EjC,eAAetB,QAAf","sourcesContent":["import React, {Component} from 'react'\nimport RegisterForm from './shared/RegisterForm'\nimport signInUser from './services/auth'\n\n\n\n\n\n\n\nclass Register extends Component {\n    constructor(props) {\n        super(props)\n\n\n        this.state = {\n            username: '',\n            password: '',\n            error: false,\n            errorMsg: ''\n        };\n\n\n    }\n    handleChange = event => {\n        this.setState({\n            [event.target.name]: event.target.value,\n            error: false,\n            errorMsg: \"\"\n        });\n    };\n    signUp = async credentials => {\n        console.log('this is for the signUp!!!!!!!', credentials)\n      try {\n        const resp = await axios.post('http://localhost:3000/users/register', credentials)\n        localStorage.setItem('token', resp.data.token)\n        return resp.data\n      } catch (error) {\n        throw error\n      }\n    }\n\n\n\n\n\n    onSignUp = event => {\n        event.preventDefault();\n    \n        const { history, setUser } = this.props;\n    \n        signUp(this.state)\n          .then(() => signInUser(this.state))\n          .then(res => setUser(res.user))\n          .then(() => history.push(\"/\"))\n          .catch(error => {\n            console.error(error);\n            this.setState({\n              username: \"\",\n              password: \"\",\n              error: true,\n              errorMsg: \"SignUp Failed\"\n            });\n          });\n      };\n\n\n\n\n\n\n    render() {\n\n        const { username, password } = this.state;\n        return (\n            <RegisterForm \n                username={username}\n                password={password}\n                onChange={this.handleChange}\n                onSubmit={this.onSignUp}\n                \n            />\n\n        )\n    }\n}\n\nexport default Register  "]},"metadata":{},"sourceType":"module"}